{% load humanize %}

<h2>2. Toxics: Worst-case</h2>

{% if object.rmp.num_worst_tox > 0 %}

{% for process in object.rmp.process_set.all %}

  {% if process.num_worst_tox > 0 %}

    {% for pc in process.procchem_set.all %}

      {% if pc.worst_tox_flag %}

        {% for twc in pc.toxicsworstcase_set.all %}
                    
          <div class="container-fluid sub-section">
            <div class="row title">
              <div class="col">{{ pc.chemical.chemical_name }} (in {{ process }})</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Percent weight:</div>
              <div class="col">{{ twc.percent_weight|default_if_none:"" }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Physical state:</div>
              <div class="col">{{ twc.physical_state.phys_tr }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Model used:</div>
              <div class="col">{{ twc.analytical_basis }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Scenario:</div>
              <div class="col">{{ twc.scenario.scen_tr }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Quantity released (lbs):</div>
              <div class="col">{{ twc.quantity_released|default_if_none:"" }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Release rate (lbs per min):</div>
              <div class="col">{{ twc.release_rate|default_if_none:"" }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Release duration (mins):</div>
              <div class="col">{{ twc.release_duration|default_if_none:"" }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Wind speed (meters per sec):</div>
              <div class="col">{{ twc.wind_speed|default_if_none:"" }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Stability class:</div>
              <div class="col">{{ twc.stability_class }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Topography:</div>
              <div class="col">{{ twc.topography.topo_tr }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Distance to endpoint (miles):</div>
              <div class="col">{{ twc.distance2_endpoint|default_if_none:"" }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Estimated residential population:</div>
              <div class="col">{{ twc.residential_population|default_if_none:""|intcomma }}</div>
            </div>

            <div class="row light sub">
              <div class="col col-label">Public receptors distance to endpoint</div>
            </div>

            <div class="row side-borders">
              <div class="col-12 col-sm-6 col-lg-5 order-1 order-sm-1 col-dark">within distance:</div>
              <div class="col-12 col-sm-6 col-lg-5 order-2 order-sm-3 col-light">
                {% if twc.public_receptors_within_distance|length > 0 %}
                <ul>
                {% for pr in twc.public_receptors_within_distance %}
                  <li>{{ pr }}</li>
                {% endfor %}
                </ul>
                {% endif %}
              </div>
              <div class="col-12 col-sm-6 col-lg-7 order-2 order-sm-2 col-dark">not within:</div>
              <div class="col-12 col-sm-6 col-lg-7 order-3 order-sm-4 col-light">
                {% if twc.public_receptors_not_within_distance|length > 0 %}
                <ul>
                {% for pr in twc.public_receptors_not_within_distance %}
                  <li>{{ pr }}</li>
                {% endfor %}
                </ul>
                {% endif %}
              </div>
            </div>

            <div class="row dark sub">
              <div class="col col-label">Environmental receptors distance to endpoint</div>
            </div>

            <div class="row side-borders">
              <div class="col-12 col-sm-6 col-lg-5 order-1 order-sm-1 col-light">within distance:</div>
              <div class="col-12 col-sm-6 col-lg-5 order-2 order-sm-3 col-dark">
                {% if twc.environmental_receptors_within_distance|length > 0 %}
                <ul>
                {% for er in twc.environmental_receptors_within_distance %}
                  <li>{{ er }}</li>
                {% endfor %}
                </ul>
                {% endif %}
              </div>
              <div class="col-12 col-sm-6 col-lg-7 order-2 order-sm-2 col-light">not within:</div>
              <div class="col-12 col-sm-6 col-lg-7 order-3 order-sm-4 col-dark">
                {% if twc.environmental_receptors_not_within_distance|length > 0 %}
                <ul>
                {% for er in twc.environmental_receptors_not_within_distance %}
                  <li>{{ er }}</li>
                {% endfor %}
                </ul>
                {% endif %}
              </div>
            </div>

            <div class="row light sub">
              <div class="col col-label">Passive mitigation</div>
            </div>

            <div class="row side-borders">
              <div class="col-12 col-sm-6 col-lg-5 order-1 order-sm-1 col-dark">considered:</div>
              <div class="col-12 col-sm-6 col-lg-5 order-2 order-sm-3 col-light">
                {% if twc.passive_mitigation_considered|length > 0 %}
                <ul>
                {% for pm in twc.passive_mitigation_considered %}
                  <li>{{ pm }}</li>
                {% endfor %}
                </ul>
                {% endif %}
              </div>
              <div class="col-12 col-sm-6 col-lg-7 order-2 order-sm-2 col-dark">not considered:</div>
              <div class="col-12 col-sm-6 col-lg-7 order-3 order-sm-4 col-light">
                {% if twc.passive_mitigation_not_considered|length > 0 %}
                <ul>
                {% for pm in twc.passive_mitigation_not_considered %}
                  <li>{{ pm }}</li>
                {% endfor %}
                </ul>
                {% endif %}
              </div>
            </div>


          </div>
                
        {% endfor %}

      {% endif %}

    {% endfor %}

  {% endif %}

{% endfor %}

{% else %}

<p>None</p>

{% endif %}