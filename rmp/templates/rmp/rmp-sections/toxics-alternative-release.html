{% load humanize %}

<h2 id="toxicsalt">3. Toxics: Alternative release</h2>

{% if object.rmp.num_alt_tox > 0 %}

{% for process in object.rmp.process_set.all %}

  {% if process.num_alt_tox > 0 %}

    {% for pc in process.procchem_set.all %}

      {% if pc.num_alt_tox > 0 %}

        {% for tar in pc.toxicsaltrelease_set.all %}

          <div class="container-fluid sub-section">
            <div class="row title">
              <div class="col">{{ pc.chemical.chemical_name }} (in {{ process }})</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">CBI claimed:</div>
              <div class="col">{{ tar.cbi_flag|yesno|capfirst }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Percent weight:</div>
              <div class="col">{{ tar.percent_weight|default_if_none:"" }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Physical state:</div>
              <div class="col">{{ tar.physical_state.phys_tr }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Model used:</div>
              <div class="col">{{ tar.analytical_basis }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Scenario:</div>
              <div class="col">{{ tar.scenario.scen_tr }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Released (lbs):</div>
              <div class="col">{{ tar.quantity_released|default_if_none:"" }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Release rate (lbs per min):</div>
              <div class="col">{{ tar.release_rate|default_if_none:"" }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Release duration (mins):</div>
              <div class="col">{{ tar.release_duration|default_if_none:"" }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Wind speed (meters per sec):</div>
              <div class="col">{{ tar.wind_speed|default_if_none:"" }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Stability class:</div>
              <div class="col">{{ tar.stability_class }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Topography:</div>
              <div class="col">{{ tar.topography.topo_tr }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Distance to endpoint (miles):</div>
              <div class="col">{{ tar.endpoint_distance|default_if_none:"" }}</div>
            </div>

            <div class="row light side-borders">
              <div class="col-4 col-sm-2 col-label">Estimated residential population:</div>
              <div class="col">{{ tar.residential_population|default_if_none:""|intcomma }}</div>
            </div>

            <div class="row dark side-borders">
              <div class="col col-label">Public receptors distance to endpoint</div>
            </div>

            <div class="row side-borders">
              <div class="col-12 col-sm-6 col-lg-5 order-1 order-sm-1 col-dark">within distance:</div>
              <div class="col-12 col-sm-6 col-lg-5 order-2 order-sm-3 col-light">
                <ul>
                {% if tar.public_receptors_within_distance|length > 0 %}
                {% for pr in tar.public_receptors_within_distance %}
                  <li>{{ pr }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
              <div class="col-12 col-sm-6 col-lg-7 order-2 order-sm-2 col-dark">not within:</div>
              <div class="col-12 col-sm-6 col-lg-7 order-3 order-sm-4 col-light">
                <ul>
                {% if tar.public_receptors_not_within_distance|length > 0 %}
                {% for pr in tar.public_receptors_not_within_distance %}
                  <li>{{ pr }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
            </div>

            <div class="row dark side-borders">
              <div class="col col-label">Environmental receptors distance to endpoint</div>
            </div>

            <div class="row side-borders">
              <div class="col-12 col-sm-6 col-lg-5 order-1 order-sm-1 col-dark">within distance:</div>
              <div class="col-12 col-sm-6 col-lg-5 order-2 order-sm-3 col-light">
                <ul>
                {% if tar.environmental_receptors_within_distance|length > 0 %}
                {% for er in tar.environmental_receptors_within_distance %}
                  <li>{{ er }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
              <div class="col-12 col-sm-6 col-lg-7 order-2 order-sm-2 col-dark">not within:</div>
              <div class="col-12 col-sm-6 col-lg-7 order-3 order-sm-4 col-light">
                <ul>
                {% if tar.environmental_receptors_not_within_distance|length > 0 %}
                {% for er in tar.environmental_receptors_not_within_distance %}
                  <li>{{ er }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
            </div>

            <div class="row dark side-borders">
              <div class="col col-label">Passive mitigation</div>
            </div>

            <div class="row side-borders">
              <div class="col-12 col-sm-6 col-lg-5 order-1 order-sm-1 col-dark">considered:</div>
              <div class="col-12 col-sm-6 col-lg-5 order-2 order-sm-3 col-light">
                <ul>
                {% if tar.passive_mitigation_considered|length > 0 %}
                {% for pm in tar.passive_mitigation_considered %}
                  <li>{{ pm }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
              <div class="col-12 col-sm-6 col-lg-7 order-2 order-sm-2 col-dark">not considered:</div>
              <div class="col-12 col-sm-6 col-lg-7 order-3 order-sm-4 col-light">
                <ul>
                {% if tar.passive_mitigation_not_considered|length > 0 %}
                {% for pm in tar.passive_mitigation_not_considered %}
                  <li>{{ pm }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
            </div>

            <div class="row dark side-borders">
              <div class="col col-label">Active mitigation</div>
            </div>

            <div class="row side-borders">
              <div class="col-12 col-sm-6 col-lg-5 order-1 order-sm-1 col-dark">considered:</div>
              <div class="col-12 col-sm-6 col-lg-5 order-2 order-sm-3 col-light">
                <ul>
                {% if tar.active_mitigation_considered|length > 0 %}
                {% for pm in tar.active_mitigation_considered %}
                  <li>{{ pm }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
              <div class="col-12 col-sm-6 col-lg-7 order-2 order-sm-2 col-dark">not considered:</div>
              <div class="col-12 col-sm-6 col-lg-7 order-3 order-sm-4 col-light">
                <ul>
                {% if tar.active_mitigation_not_considered|length > 0 %}
                {% for pm in tar.active_mitigation_not_considered %}
                  <li>{{ pm }}</li>
                {% endfor %}
                {% else %}
                  <li>None</li>
                {% endif %}
                </ul>
              </div>
            </div>

            <div class="row dark side-borders">
              <div class="col-4 col-sm-2 col-label">Graphics file name:</div>
              <div class="col">{{ tar.ptr_graphic }}</div>
            </div>

          </div>

        {% endfor %}

      {% endif %}

    {% endfor %}

  {% endif %}

{% endfor %}

{% else %}

<p>None</p>

{% endif %}
